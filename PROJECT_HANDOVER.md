# å¥¶èŒ¶å¤§ä½œæˆ˜ - é¡¹ç›®äº¤æ¥æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æ›´æ–°æ—¥æœŸ**: 2025-11-21
> **é¡¹ç›®çŠ¶æ€**: å¼€å‘ä¸­ï¼ˆæ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œéƒ¨åˆ†åŠŸèƒ½å¾…å®ç°ï¼‰
> **ä¸‹ä¸€æ­¥å·¥ä½œ**: æµ‹è¯•å·²å®ŒæˆåŠŸèƒ½ã€å®ç°å‰©ä½™æ¨¡å—ã€éƒ¨ç½²ä¸Šçº¿

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
4. [å·²å®ŒæˆåŠŸèƒ½](#å·²å®ŒæˆåŠŸèƒ½)
5. [å¾…å¼€å‘åŠŸèƒ½](#å¾…å¼€å‘åŠŸèƒ½)
6. [æ ¸å¿ƒä¸šåŠ¡é€»è¾‘](#æ ¸å¿ƒä¸šåŠ¡é€»è¾‘)
7. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
8. [APIæ¥å£æ–‡æ¡£](#apiæ¥å£æ–‡æ¡£)
9. [å‰ç«¯ç»„ä»¶è¯´æ˜](#å‰ç«¯ç»„ä»¶è¯´æ˜)
10. [å¼€å‘ç¯å¢ƒé…ç½®](#å¼€å‘ç¯å¢ƒé…ç½®)
11. [å·²çŸ¥é—®é¢˜](#å·²çŸ¥é—®é¢˜)
12. [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
13. [é‡è¦æ–‡æ¡£ç´¢å¼•](#é‡è¦æ–‡æ¡£ç´¢å¼•)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
**å¥¶èŒ¶å¤§ä½œæˆ˜**æ˜¯ä¸€æ¬¾ç½‘é¡µç«¯å¤šäººå›åˆåˆ¶å•†ä¸šæ¨¡æ‹Ÿæ¸¸æˆï¼Œç©å®¶æ‰®æ¼”å¥¶èŒ¶åº—è€æ¿ï¼Œé€šè¿‡10å›åˆçš„ç»è¥ç«äº‰ï¼Œæœ€ç»ˆä»¥ç´¯è®¡åˆ©æ¶¦æ’åå†³å®šèƒœè´Ÿã€‚

### æ ¸å¿ƒç©æ³•
- **ç©å®¶æ•°é‡**: 2-4äºº
- **æ¸¸æˆå›åˆ**: 10å›åˆ
- **èµ·å§‹èµ„é‡‘**: 10,000å…ƒ
- **å†³ç­–æ¨¡å—**: é—¨åº—å†³ç­–ã€å‘˜å·¥ç®¡ç†ã€å¸‚åœºè¡ŒåŠ¨ã€äº§å“ç ”å‘ã€ç”Ÿäº§å†³ç­–
- **èƒœåˆ©æ¡ä»¶**: 10å›åˆåç´¯è®¡åˆ©æ¶¦æœ€é«˜è€…è·èƒœ

### æ¸¸æˆæµç¨‹
```
åˆ›å»º/åŠ å…¥æˆ¿é—´ â†’ ç­‰å¾…å¼€å§‹ â†’
å›åˆ1-10å¾ªç¯ï¼ˆå†³ç­–é˜¶æ®µ â†’ ç­‰å¾…å…¶ä»–ç©å®¶ â†’ æŸ¥çœ‹å›åˆæ€»ç»“ï¼‰ â†’
æ¸¸æˆç»“æŸï¼ˆæŸ¥çœ‹æœ€ç»ˆæ’åï¼‰
```

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 19.0.0 | å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.7.3 | ç±»å‹å®‰å…¨ |
| Vite | 7.2.2 | æ„å»ºå·¥å…· |
| Ant Design | 5.22.10 | UIç»„ä»¶åº“ |
| Zustand | 5.0.3 | çŠ¶æ€ç®¡ç† |
| Axios | 1.8.0 | HTTPå®¢æˆ·ç«¯ |

### åç«¯æŠ€æœ¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.x | åç«¯è¯­è¨€ |
| Flask | 3.0.0 | Webæ¡†æ¶ |
| SQLAlchemy | 2.0.0 | ORM |
| Flask-CORS | 5.0.0 | è·¨åŸŸæ”¯æŒ |
| PyMySQL | 1.1.1 | MySQLé©±åŠ¨ |
| MySQL | 8.x | æ•°æ®åº“ï¼ˆZeaburäº‘æ‰˜ç®¡ï¼‰ |

### å¼€å‘å·¥å…·
- **ä»£ç ç¼–è¾‘å™¨**: VS Code
- **APIæµ‹è¯•**: æµè§ˆå™¨æ§åˆ¶å° / Postman
- **ç‰ˆæœ¬æ§åˆ¶**: Gitï¼ˆå¯é€‰ï¼‰
- **æ•°æ®åº“ç®¡ç†**: MySQL Workbench / Zeaburæ§åˆ¶å°

---

## é¡¹ç›®ç»“æ„

```
naicha/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/            # APIè·¯ç”±å±‚ï¼ˆè–„æ§åˆ¶å™¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ game.py        # æ¸¸æˆç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ player.py      # ç©å®¶API
â”‚   â”‚   â”‚   â”œâ”€â”€ shop.py        # é—¨åº—API
â”‚   â”‚   â”‚   â”œâ”€â”€ employee.py    # å‘˜å·¥API
â”‚   â”‚   â”‚   â”œâ”€â”€ product.py     # äº§å“ç ”å‘API
â”‚   â”‚   â”‚   â”œâ”€â”€ market.py      # å¸‚åœºè¡ŒåŠ¨API
â”‚   â”‚   â”‚   â”œâ”€â”€ production.py  # ç”Ÿäº§å†³ç­–API
â”‚   â”‚   â”‚   â”œâ”€â”€ round.py       # å›åˆç®¡ç†API
â”‚   â”‚   â”‚   â””â”€â”€ finance.py     # è´¢åŠ¡API
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ calculation_engine.py      # è®¡ç®—å¼•æ“ï¼ˆå£ç¢‘ã€å®¢æµåˆ†é…ã€æŠ˜æ‰£ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ production_service.py      # ç”Ÿäº§å†³ç­–æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ round_service.py           # å›åˆæ¨è¿›æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ finance_service.py         # è´¢åŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ shop_service.py            # é—¨åº—æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ employee_service.py        # å‘˜å·¥æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ product_service.py         # äº§å“ç ”å‘æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ market_service.py          # å¸‚åœºè¡ŒåŠ¨æœåŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹å±‚ï¼ˆORMï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ game.py        # Games, CustomerFlow
â”‚   â”‚   â”‚   â”œâ”€â”€ player.py      # Players, Shops, Employees
â”‚   â”‚   â”‚   â”œâ”€â”€ product.py     # ProductRecipes, PlayerProducts, RoundProductions, MaterialInventories
â”‚   â”‚   â”‚   â””â”€â”€ finance.py     # FinanceRecords, ResearchLogs, MarketActions
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # ç¯å¢ƒé…ç½®ã€æ¸¸æˆå¸¸é‡
â”‚   â”‚   â”‚   â””â”€â”€ database.py    # SQLAlchemyè®¾ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ game_constants.py  # æ¸¸æˆè§„åˆ™å¸¸é‡ç±»
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ main.py            # Flaskåº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/               # æ•°æ®åº“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ setup_database.py # åˆå§‹åŒ–æ•°æ®åº“ï¼ˆå»ºè¡¨+ç§å­æ•°æ®ï¼‰
â”‚   â”‚   â”œâ”€â”€ add_turn_order.py # æ·»åŠ turn_orderå­—æ®µ
â”‚   â”‚   â”œâ”€â”€ add_game_name.py  # æ·»åŠ game_nameå­—æ®µ
â”‚   â”‚   â””â”€â”€ clear_all_games.py# æ¸…ç©ºæ¸¸æˆæ•°æ®ï¼ˆæµ‹è¯•ç”¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â””â”€â”€ run.py                 # å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ frontend/                  # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Lobby.tsx      # å¤§å…ï¼ˆåˆ›å»º/åŠ å…¥æˆ¿é—´ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ Room.tsx       # æˆ¿é—´ï¼ˆç­‰å¾…å¼€å§‹ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ Game.tsx       # æ¸¸æˆä¸»ç•Œé¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/game/   # æ¸¸æˆç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GameHeader.tsx         # æ¸¸æˆå¤´éƒ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerList.tsx         # ç©å®¶åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ DecisionPanel.tsx      # å†³ç­–é¢æ¿å®¹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ShopDecision.tsx       # é—¨åº—å†³ç­– âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ EmployeeManagement.tsx # å‘˜å·¥ç®¡ç† âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ MarketAction.tsx       # å¸‚åœºè¡ŒåŠ¨ âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductResearch.tsx    # äº§å“ç ”å‘ âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductionPlan.tsx     # ç”Ÿäº§å†³ç­– ğŸš§
â”‚   â”‚   â”‚   â”œâ”€â”€ RoundSummary.tsx       # å›åˆæ€»ç»“ ğŸš§
â”‚   â”‚   â”‚   â”œâ”€â”€ DiceRoller.tsx         # éª°å­åŠ¨ç”»ç»„ä»¶ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ GameEnd.tsx            # æ¸¸æˆç»“æŸ ğŸš§
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/            # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ gameStore.ts       # æ¸¸æˆå…¨å±€çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ gameRoundStore.ts  # å›åˆçŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ decisionStore.ts   # å†³ç­–çŠ¶æ€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/               # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts      # Axiosé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ game.ts        # æ¸¸æˆAPI
â”‚   â”‚   â”‚   â”œâ”€â”€ player.ts      # ç©å®¶API
â”‚   â”‚   â”‚   â”œâ”€â”€ shop.ts        # é—¨åº—API
â”‚   â”‚   â”‚   â”œâ”€â”€ employee.ts    # å‘˜å·¥API âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ product.ts     # äº§å“API âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ market.ts      # å¸‚åœºAPI âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ production.ts  # ç”Ÿäº§API
â”‚   â”‚   â”‚   â”œâ”€â”€ round.ts       # å›åˆAPI
â”‚   â”‚   â”‚   â””â”€â”€ finance.ts     # è´¢åŠ¡API
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts       # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ CLAUDE.md                  # Claude CodeæŒ‡å¯¼æ–‡æ¡£ï¼ˆæ ¸å¿ƒï¼‰
â”œâ”€â”€ PROJECT_HANDOVER.md        # æœ¬æ–‡æ¡£
â”œâ”€â”€ å®¢æˆ·åé¦ˆ-éœ€ç¡®è®¤ç»†èŠ‚.md     # å®¢æˆ·éœ€æ±‚ç¡®è®¤æ–‡æ¡£
â”œâ”€â”€ technical_design_document.md   # æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼ˆ800+è¡Œï¼‰
â”œâ”€â”€ game_rules.md              # æ¸¸æˆè§„åˆ™æ–‡æ¡£
â”œâ”€â”€ user_jiagou.md             # ç”¨æˆ·æä¾›çš„æ¶æ„æ–‡æ¡£
â””â”€â”€ user_rules.md              # ç”¨æˆ·æä¾›çš„è§„åˆ™æ–‡æ¡£
```

**å›¾ä¾‹**:
- âœ… = å·²å®Œæˆ
- ğŸš§ = å¾…å¼€å‘/å¾…å®Œå–„
- âš ï¸ = å­˜åœ¨å·²çŸ¥é—®é¢˜

---

## å·²å®ŒæˆåŠŸèƒ½

### âœ… æ ¸å¿ƒæ¡†æ¶ä¸åŸºç¡€è®¾æ–½

#### åç«¯
- [x] Flaskåº”ç”¨æ¡†æ¶æ­å»º
- [x] SQLAlchemy ORMé…ç½®
- [x] MySQLæ•°æ®åº“è¿æ¥ï¼ˆZeaburäº‘æ‰˜ç®¡ï¼‰
- [x] CORSè·¨åŸŸé…ç½®
- [x] 12å¼ æ•°æ®è¡¨è®¾è®¡ä¸åˆ›å»º
- [x] æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼ˆå«7ç§äº§å“é…æ–¹ç§å­æ•°æ®ï¼‰
- [x] ä¸‰å±‚æ¶æ„å®ç°ï¼ˆAPIå±‚ã€Serviceå±‚ã€Modelå±‚ï¼‰

#### å‰ç«¯
- [x] React + TypeScript + Viteé¡¹ç›®æ­å»º
- [x] Ant Design UIæ¡†æ¶é›†æˆ
- [x] ZustandçŠ¶æ€ç®¡ç†
- [x] Axios HTTPå®¢æˆ·ç«¯é…ç½®
- [x] è·¯ç”±ç³»ç»Ÿï¼ˆLobby â†’ Room â†’ Gameï¼‰
- [x] å“åº”å¼å¸ƒå±€

### âœ… æ¸¸æˆæˆ¿é—´ç³»ç»Ÿ

#### åŠŸèƒ½
- [x] åˆ›å»ºæ¸¸æˆæˆ¿é—´ï¼ˆç”Ÿæˆ6ä½æˆ¿é—´ç ï¼‰
- [x] åŠ å…¥æ¸¸æˆæˆ¿é—´
- [x] ç­‰å¾…æˆ¿é—´ï¼ˆæ˜¾ç¤ºå·²åŠ å…¥ç©å®¶ï¼‰
- [x] ç©å®¶å‡†å¤‡/å–æ¶ˆå‡†å¤‡
- [x] æˆ¿ä¸»å¼€å§‹æ¸¸æˆ
- [x] è‡ªåŠ¨åˆ†é…turn_orderï¼ˆç©å®¶è¡ŒåŠ¨é¡ºåºï¼‰

#### APIæ¥å£
- `POST /api/v1/games/create` - åˆ›å»ºæˆ¿é—´
- `POST /api/v1/players/join/{room_code}` - åŠ å…¥æˆ¿é—´
- `GET /api/v1/games/{room_code}` - è·å–æˆ¿é—´ä¿¡æ¯
- `POST /api/v1/games/{room_code}/start` - å¼€å§‹æ¸¸æˆ
- `PATCH /api/v1/players/{player_id}/ready` - ç©å®¶å‡†å¤‡çŠ¶æ€

### âœ… é—¨åº—å†³ç­–ç³»ç»Ÿ

#### åŠŸèƒ½
- [x] å¼€è®¾é—¨åº—ï¼ˆ3ä¸ªå•†åœˆé€‰æ‹©ï¼Œå›ºå®šç§Ÿé‡‘ï¼‰
- [x] å‡çº§è£…ä¿®ï¼ˆ3ä¸ªç­‰çº§ï¼šç®€é™‹/æ™®é€š/ç²¾è‡´ï¼‰
- [x] è£…ä¿®ç­‰çº§å†³å®šæœ€å¤§å‘˜å·¥å®¹é‡ï¼ˆ2äºº/3äºº/4äººï¼‰
- [x] è£…ä¿®è´¹ç”¨ï¼š400å…ƒ/800å…ƒ/1600å…ƒ
- [x] å‰ç«¯UIå®Œæ•´å®ç°

#### å…³é”®æ–‡ä»¶
- `backend/app/services/shop_service.py` - é—¨åº—ä¸šåŠ¡é€»è¾‘
- `backend/app/api/v1/shop.py` - é—¨åº—API
- `frontend/src/components/game/ShopDecision.tsx` - é—¨åº—UI

#### æ•°æ®è¡¨
- `shops` - é—¨åº—ä¿¡æ¯ï¼ˆlocation, rent, decoration_level, max_employeesï¼‰

### âœ… å‘˜å·¥ç®¡ç†ç³»ç»Ÿ

#### åŠŸèƒ½
- [x] æ‹›è˜å‘˜å·¥ï¼ˆçº¿ä¸‹æŠ½å¡ï¼Œçº¿ä¸Šè¾“å…¥å§“å/å·¥èµ„/ç”Ÿäº§åŠ›ï¼‰
- [x] è§£é›‡å‘˜å·¥ï¼ˆæ ‡è®°ä¸ºinactiveï¼‰
- [x] æ˜¾ç¤ºæ€»ç”Ÿäº§åŠ›ã€æ€»å·¥èµ„ç»Ÿè®¡
- [x] å‘˜å·¥å®¹é‡é™åˆ¶ï¼ˆæ ¹æ®è£…ä¿®ç­‰çº§ï¼‰
- [x] å‰ç«¯UIå®Œæ•´å®ç°

#### å…³é”®æ–‡ä»¶
- `backend/app/services/employee_service.py` - å‘˜å·¥ä¸šåŠ¡é€»è¾‘
- `backend/app/api/v1/employee.py` - å‘˜å·¥API
- `frontend/src/components/game/EmployeeManagement.tsx` - å‘˜å·¥UI

#### æ•°æ®è¡¨
- `employees` - å‘˜å·¥ä¿¡æ¯ï¼ˆname, salary, productivity, hired_round, is_activeï¼‰

### âœ… äº§å“ç ”å‘ç³»ç»Ÿï¼ˆæ–¹æ¡ˆAï¼‰

#### åŠŸèƒ½
- [x] æ˜¾ç¤º7ç§äº§å“é…æ–¹ï¼ˆå¥¶èŒ¶ã€æ¤°å¥¶ã€æŸ æª¬èŒ¶ã€æœæ±ã€çç å¥¶èŒ¶ã€æ°´æœå¥¶æ˜”ã€æ°´æœèŒ¶ï¼‰
- [x] ç ”å‘æµç¨‹ï¼šé€‰æ‹©é…æ–¹ â†’ æ”¯ä»˜600å…ƒ â†’ çº¿ä¸‹æ·éª°å­ â†’ è¾“å…¥ç»“æœ â†’ åˆ¤æ–­æˆåŠŸ/å¤±è´¥
- [x] éš¾åº¦ç³»ç»Ÿï¼š
  - éš¾åº¦1ï¼ˆé…æ–¹1-4ï¼‰ï¼šéœ€â‰¥2æˆåŠŸï¼ˆ83%æˆåŠŸç‡ï¼‰
  - éš¾åº¦2ï¼ˆé…æ–¹5-6ï¼‰ï¼šéœ€â‰¥3æˆåŠŸï¼ˆ67%æˆåŠŸç‡ï¼‰
  - éš¾åº¦3ï¼ˆé…æ–¹7ï¼‰ï¼šéœ€â‰¥4æˆåŠŸï¼ˆ50%æˆåŠŸç‡ï¼‰
- [x] ç ”å‘æˆåŠŸ â†’ è§£é”é…æ–¹ï¼Œå¯è¿›å…¥ç”Ÿäº§
- [x] ç ”å‘å¤±è´¥ â†’ ä¸è§£é”ï¼Œ600å…ƒå·²æ‰£é™¤
- [x] å‰ç«¯UIå®Œæ•´å®ç°ï¼ˆå«éª°å­åŠ¨ç”»æç¤ºï¼‰

#### å…³é”®æ–‡ä»¶
- `backend/app/services/product_service.py` - äº§å“ç ”å‘é€»è¾‘
- `backend/app/api/v1/product.py` - äº§å“API
- `frontend/src/components/game/ProductResearch.tsx` - ç ”å‘UI
- `frontend/src/components/game/DiceRoller.tsx` - éª°å­åŠ¨ç”»ç»„ä»¶

#### æ•°æ®è¡¨
- `product_recipes` - 7ç§äº§å“é…æ–¹ï¼ˆå›ºå®šï¼‰
- `player_products` - ç©å®¶å·²è§£é”äº§å“
- `research_logs` - ç ”å‘å†å²è®°å½•

### âœ… å¸‚åœºè¡ŒåŠ¨ç³»ç»Ÿ

#### åŠŸèƒ½

##### ğŸ“£ å¹¿å‘ŠæŠ•æ”¾ï¼ˆå·²ä¿®æ”¹ä¸ºéç´¯è®¡æ¨¡å¼ï¼‰
- [x] é€‰æ‹©äº§å“ â†’ æ”¯ä»˜800å…ƒ â†’ çº¿ä¸‹æ·éª°å­ â†’ è¾“å…¥ç»“æœï¼ˆ1-6ï¼‰
- [x] **å¹¿å‘Šåˆ†ä¸ç´¯è®¡**ï¼šæ¯å›åˆé‡æ–°è®¾ç½®ï¼ˆæ›¿æ¢ï¼Œè€Œéç´¯åŠ ï¼‰
- [x] å‰ç«¯UIå®Œæ•´å®ç°ï¼ˆå«éª°å­è¾“å…¥ç•Œé¢ï¼‰

##### ğŸ“Š å¸‚åœºè°ƒç ”
- [x] æ”¯ä»˜500å…ƒ â†’ æŸ¥çœ‹**ä¸‹å›åˆ**å®¢æµæ•°æ®
- [x] æ˜¾ç¤ºé«˜æ¶ˆè´¹å®¢æˆ· + ä½æ¶ˆè´¹å®¢æˆ·æ•°é‡
- [x] å‰ç«¯UIå®Œæ•´å®ç°

#### å…³é”®æ–‡ä»¶
- `backend/app/services/market_service.py` - å¸‚åœºè¡ŒåŠ¨é€»è¾‘
- `backend/app/api/v1/market.py` - å¸‚åœºAPI
- `frontend/src/components/game/MarketAction.tsx` - å¸‚åœºè¡ŒåŠ¨UI

#### æ•°æ®è¡¨
- `market_actions` - å¸‚åœºè¡ŒåŠ¨è®°å½•ï¼ˆad/researchï¼‰

### âœ… æ ¸å¿ƒè®¡ç®—å¼•æ“

#### å·²å®ç°ç®—æ³•

##### 1. å£ç¢‘åˆ†è®¡ç®—å™¨ (ReputationCalculator)
```python
å£ç¢‘åˆ† = å¹¿å‘Šåˆ† + (åœˆç²‰ç‡ Ã— ç´¯è®¡é”€å”®æ¯æ•°)
```
- åœˆç²‰ç‡å›ºå®šï¼ˆ5% / 20% / 30%ï¼‰ï¼Œ**æ— ä¸‹é™æœºåˆ¶**
- ç´¯è®¡é”€å”®æ•°ä»`player_products.total_sold`è·å–
- æ–‡ä»¶ï¼š`backend/app/services/calculation_engine.py`

##### 2. å®¢æµåˆ†é…å™¨ (CustomerFlowAllocator)
**æ ¸å¿ƒç®—æ³•**ï¼šé«˜ç«¯å®¢æˆ·ä¼˜å…ˆå£ç¢‘ï¼Œä½ç«¯å®¢æˆ·ä¼˜å…ˆä»·æ ¼

**é«˜æ¶ˆè´¹å®¢æˆ·åˆ†é…**ï¼š
1. æŒ‰å£ç¢‘åˆ†é™åºæ’åº
2. å£ç¢‘ç›¸åŒï¼ŒæŒ‰ä»·æ ¼å‡åºæ’åº
3. ä¾æ¬¡åˆ†é…ç”Ÿäº§å®¹é‡

**ä½æ¶ˆè´¹å®¢æˆ·åˆ†é…**ï¼ˆä»…åˆ†é…ç»™å£ç¢‘>0çš„äº§å“ï¼‰ï¼š
1. è¿‡æ»¤å£ç¢‘åˆ†>0çš„äº§å“
2. æŒ‰ä»·æ ¼å‡åºæ’åº
3. ä»·æ ¼ç›¸åŒï¼ŒæŒ‰å£ç¢‘é™åºæ’åº
4. ä¾æ¬¡åˆ†é…å‰©ä½™ç”Ÿäº§å®¹é‡

##### 3. æ‰¹é‡æŠ˜æ‰£è®¡ç®—å™¨ (DiscountCalculator)
- æ¯50å•ä½ææ–™ï¼š-10%ä»·æ ¼ï¼ˆæœ€å¤š5æ¡£ = -50%ï¼‰
- åŸºç¡€ä»·æ ¼ï¼šèŒ¶6å…ƒã€å¥¶4å…ƒã€æœ5å…ƒã€æ–™2å…ƒ
- æ–‡ä»¶ï¼š`backend/app/services/calculation_engine.py`

### âœ… å®šä»·è§„åˆ™ç³»ç»Ÿ

#### åŠŸèƒ½
- [x] ä»·æ ¼èŒƒå›´ï¼š10-40å…ƒï¼ˆå¿…é¡»æ˜¯5çš„å€æ•°ï¼‰
- [x] **3å›åˆä»·æ ¼é”å®š**ï¼šä»»æ„è¿ç»­3å›åˆå†…ä¸å¯ä¿®æ”¹
  - ç¤ºä¾‹ï¼šç¬¬Xå›åˆä¿®æ”¹ä»·æ ¼ â†’ ç¬¬X+1ã€X+2å›åˆé”å®š â†’ ç¬¬X+3å›åˆå¯å†æ¬¡ä¿®æ”¹
- [x] åç«¯éªŒè¯é€»è¾‘å·²å®ç°

#### å…³é”®æ–‡ä»¶
- `backend/app/services/production_service.py:275` - `_validate_price_lock()`å‡½æ•°

#### æ•°æ®è¡¨
- `player_products.last_price_change_round` - è®°å½•ä¸Šæ¬¡ä¿®æ”¹ä»·æ ¼çš„å›åˆ

### âœ… å®¢æµç”Ÿæˆç³»ç»Ÿ

#### åŠŸèƒ½
- [x] **å›ºå®š10å›åˆå®¢æµè„šæœ¬**ï¼ˆééšæœºï¼‰
- [x] æ¯å›åˆç”Ÿæˆé«˜æ¶ˆè´¹å®¢æˆ· + ä½æ¶ˆè´¹å®¢æˆ·
- [x] å®¢æµæ•°æ®æå‰ç”Ÿæˆï¼Œå¯é€šè¿‡å¸‚åœºè°ƒç ”æŸ¥çœ‹ä¸‹å›åˆæ•°æ®

#### å®¢æµè„šæœ¬ï¼ˆGameConstants.CUSTOMER_FLOW_SCRIPTï¼‰
```python
{
    1:  {"high": 40,  "low": 300},
    2:  {"high": 90,  "low": 280},
    3:  {"high": 140, "low": 360},
    4:  {"high": 40,  "low": 410},
    5:  {"high": 90,  "low": 360},
    6:  {"high": 140, "low": 510},
    7:  {"high": 140, "low": 360},
    8:  {"high": 90,  "low": 510},
    9:  {"high": 140, "low": 510},
    10: {"high": 190, "low": 610}
}
```

#### å…³é”®æ–‡ä»¶
- `backend/app/utils/game_constants.py:CUSTOMER_FLOW_SCRIPT`
- `backend/app/services/round_service.py:generate_customer_flow()`

#### æ•°æ®è¡¨
- `customer_flows` - æ¯å›åˆå®¢æµè®°å½•ï¼ˆgame_id, round_number, high_tier_customers, low_tier_customersï¼‰

---

## å¾…å¼€å‘åŠŸèƒ½

### ğŸš§ ç”Ÿäº§å†³ç­–ç³»ç»Ÿï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

#### å¾…å®ç°åŠŸèƒ½
- [ ] æ˜¾ç¤ºå·²è§£é”çš„äº§å“åˆ—è¡¨
- [ ] ä¸ºæ¯ä¸ªäº§å“åˆ†é…ç”Ÿäº§åŠ›ï¼ˆä»å‘˜å·¥æ€»ç”Ÿäº§åŠ›ä¸­åˆ†é…ï¼‰
- [ ] è®¾ç½®äº§å“å®šä»·ï¼ˆ10-40å…ƒï¼Œ5çš„å€æ•°ï¼‰
- [ ] éªŒè¯å®šä»·é”å®šè§„åˆ™ï¼ˆ3å›åˆï¼‰
- [ ] è‡ªåŠ¨è®¡ç®—æ‰€éœ€ææ–™ï¼ˆæ ¹æ®é…æ–¹Ã—ç”Ÿäº§æ•°é‡ï¼‰
- [ ] ææ–™é‡‡è´­ç•Œé¢ï¼ˆæ˜¾ç¤ºæ‰¹é‡æŠ˜æ‰£ï¼‰
- [ ] æäº¤ç”Ÿäº§è®¡åˆ’ï¼ˆé”å®šæœ¬å›åˆå†³ç­–ï¼‰

#### å…³é”®é€»è¾‘
```
ç”Ÿäº§æ•°é‡ = åˆ†é…çš„ç”Ÿäº§åŠ›
æ‰€éœ€ææ–™ = é…æ–¹æˆåˆ† Ã— ç”Ÿäº§æ•°é‡
ææ–™è´¹ç”¨ = åŸºç¡€ä»·æ ¼ Ã— æ•°é‡ Ã— æŠ˜æ‰£ç³»æ•°
```

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
- `frontend/src/components/game/ProductionPlan.tsx` - å‰ç«¯UIï¼ˆå½“å‰æ˜¯å ä½ç¬¦ï¼‰
- `backend/app/services/production_service.py` - å·²æœ‰éƒ¨åˆ†é€»è¾‘ï¼Œéœ€è¡¥å……ææ–™é‡‡è´­

#### ç›¸å…³æ•°æ®è¡¨
- `round_productions` - å›åˆç”Ÿäº§è®¡åˆ’
- `material_inventories` - ææ–™åº“å­˜ï¼ˆ**æ³¨æ„ï¼šéœ€å®ç°å›åˆç»“æŸæ—¶æ¸…é›¶**ï¼‰

#### å‚è€ƒæ¥å£
- `POST /api/v1/production/submit` - æäº¤ç”Ÿäº§è®¡åˆ’ï¼ˆå·²å­˜åœ¨ï¼‰

### ğŸš§ å›åˆæ¨è¿›ç³»ç»Ÿï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

#### å¾…å®ç°åŠŸèƒ½
- [ ] æ£€æŸ¥æ‰€æœ‰ç©å®¶æ˜¯å¦å®Œæˆå†³ç­–
- [ ] æ‰§è¡Œå®¢æµåˆ†é…ç®—æ³•ï¼ˆè°ƒç”¨CustomerFlowAllocatorï¼‰
- [ ] è®¡ç®—é”€å”®æ•°é‡ã€é”€å”®æ”¶å…¥
- [ ] æ›´æ–°player_products.total_sold
- [ ] æ‰£é™¤å‘˜å·¥å·¥èµ„ã€é—¨åº—ç§Ÿé‡‘
- [ ] **æ¸…ç©ºæœªä½¿ç”¨çš„ææ–™åº“å­˜**ï¼ˆæ–¹æ¡ˆAï¼šç›´æ¥æ¸…é›¶ï¼‰
- [ ] ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨ï¼ˆFinanceRecordsï¼‰
- [ ] æ¨è¿›åˆ°ä¸‹ä¸€å›åˆï¼ˆround_number + 1ï¼‰
- [ ] åˆ¤æ–­æ¸¸æˆæ˜¯å¦ç»“æŸï¼ˆ10å›åˆåï¼‰

#### å…³é”®é€»è¾‘ç‚¹
```
å›åˆç»“ç®—æµç¨‹ï¼š
1. æ‰€æœ‰ç©å®¶å†³ç­–å®Œæˆ â†’ è§¦å‘å›åˆç»“ç®—
2. ç”Ÿæˆå®¢æµæ•°æ®ï¼ˆä»å›ºå®šè„šæœ¬ï¼‰
3. æ‰§è¡Œå®¢æµåˆ†é…ç®—æ³•
4. è®¡ç®—æ”¶å…¥/æ”¯å‡º
5. **æ¸…ç©ºææ–™åº“å­˜ï¼ˆæœªä½¿ç”¨çš„ç›´æ¥æ¸…é›¶ï¼Œä¸é€€æ¬¾ï¼‰**
6. æ›´æ–°ç©å®¶ç°é‡‘
7. ç”Ÿæˆè´¢åŠ¡è®°å½•
8. æ¨è¿›å›åˆæ•°
9. é‡ç½®ç©å®¶å†³ç­–çŠ¶æ€
```

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
- `backend/app/services/round_service.py:advance_round()` - éœ€è¡¥å……ææ–™æ¸…é›¶é€»è¾‘
- `frontend/src/components/game/RoundSummary.tsx` - å›åˆæ€»ç»“UIï¼ˆå½“å‰æ˜¯å ä½ç¬¦ï¼‰

#### ç›¸å…³æ•°æ®è¡¨
- `material_inventories` - **æ¯å›åˆç»“æŸæ—¶DELETEæ‰å½“å‰å›åˆçš„æ‰€æœ‰è®°å½•**
- `finance_records` - è´¢åŠ¡æŠ¥è¡¨
- `round_productions` - ç”Ÿäº§ç»“æœï¼ˆsold_quantity, revenueï¼‰

### ğŸš§ æ¸¸æˆç»“æŸä¸æ’åç³»ç»Ÿï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

#### å¾…å®ç°åŠŸèƒ½
- [ ] æ£€æµ‹ç¬¬10å›åˆç»“æŸ
- [ ] è®¡ç®—æ‰€æœ‰ç©å®¶çš„ç´¯è®¡åˆ©æ¶¦
- [ ] ç”Ÿæˆæœ€ç»ˆæ’åï¼ˆæŒ‰ç´¯è®¡åˆ©æ¶¦é™åºï¼‰
- [ ] æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
- [ ] å±•ç¤ºè·èƒœè€… + å®Œæ•´æ’è¡Œæ¦œ
- [ ] è¿”å›å¤§å…æŒ‰é’®

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
- `frontend/src/components/game/GameEnd.tsx` - æ¸¸æˆç»“æŸUIï¼ˆå½“å‰æ˜¯å ä½ç¬¦ï¼‰
- `backend/app/services/finance_service.py:get_profit_summary()` - å·²å­˜åœ¨ï¼Œéœ€è¡¥å……æ’åé€»è¾‘

#### ç›¸å…³æ¥å£
- `GET /api/v1/finance/game/{game_id}/profit-summary` - è·å–åˆ©æ¶¦æ€»ç»“ï¼ˆå·²å­˜åœ¨ï¼‰

### ğŸš§ å‰ç«¯å†³ç­–æµç¨‹ç®¡ç†ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

#### å¾…å®Œå–„åŠŸèƒ½
- [ ] å†³ç­–æ­¥éª¤æµç¨‹æ§åˆ¶ï¼ˆshop â†’ employees â†’ market â†’ research â†’ productionï¼‰
- [ ] æ¯ä¸ªæ­¥éª¤å®Œæˆåè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥
- [ ] "æäº¤å†³ç­–"æŒ‰é’®ï¼ˆé”å®šæ‰€æœ‰å†³ç­–ï¼Œç­‰å¾…å…¶ä»–ç©å®¶ï¼‰
- [ ] ç­‰å¾…ç•Œé¢ï¼ˆæ˜¾ç¤ºå…¶ä»–ç©å®¶å†³ç­–çŠ¶æ€ï¼‰
- [ ] å›åˆæ€»ç»“è‡ªåŠ¨å¼¹å‡º
- [ ] çŠ¶æ€åŒæ­¥ä¼˜åŒ–ï¼ˆé¿å…é¢‘ç¹è½®è¯¢ï¼‰

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
- `frontend/src/pages/Game.tsx` - ä¸»æ¸¸æˆæµç¨‹æ§åˆ¶
- `frontend/src/components/game/DecisionPanel.tsx` - å†³ç­–é¢æ¿æµç¨‹
- `frontend/src/stores/decisionStore.ts` - å†³ç­–çŠ¶æ€ç®¡ç†

### ğŸš§ è´¢åŠ¡æŠ¥è¡¨ç³»ç»Ÿï¼ˆä½ä¼˜å…ˆçº§ï¼‰

#### å¾…å®ç°åŠŸèƒ½
- [ ] å›åˆè´¢åŠ¡è¯¦æƒ…æŸ¥è¯¢
- [ ] æ”¶å…¥/æ”¯å‡ºæ˜ç»†å±•ç¤º
- [ ] å†å²å›åˆå¯¹æ¯”
- [ ] å›¾è¡¨å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
- æ–°å¢ç»„ä»¶ï¼š`frontend/src/components/game/FinanceReport.tsx`

#### ç›¸å…³æ¥å£
- `GET /api/v1/finance/player/{player_id}/records` - å·²å­˜åœ¨

---

## æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### æ¸¸æˆå¸¸é‡ï¼ˆGameConstantsï¼‰

æ‰€æœ‰æ¸¸æˆè§„åˆ™å®šä¹‰åœ¨ `backend/app/utils/game_constants.py`ï¼š

```python
class GameConstants:
    # æ¸¸æˆåŸºç¡€å‚æ•°
    MIN_PLAYERS = 2
    MAX_PLAYERS = 4
    TOTAL_ROUNDS = 10
    INITIAL_CASH = 10000.0

    # è£…ä¿®æˆæœ¬ä¸å‘˜å·¥å®¹é‡
    DECORATION_COSTS = {1: 400, 2: 800, 3: 1600}
    MAX_EMPLOYEES = {1: 2, 2: 3, 3: 4}

    # ææ–™åŸºç¡€ä»·æ ¼ï¼ˆæ¯å•ä½ï¼‰
    MATERIAL_BASE_PRICES = {
        "tea": 6.0,        # èŒ¶å¶
        "milk": 4.0,       # ç‰›å¥¶
        "fruit": 5.0,      # æ°´æœ
        "ingredient": 2.0  # é…æ–™
    }

    # å®šä»·è§„åˆ™
    MIN_PRICE = 10.0
    MAX_PRICE = 40.0
    PRICE_STEP = 5.0
    PRICE_LOCK_ROUNDS = 3  # è¿ç»­3å›åˆä¸å¯ä¿®æ”¹

    # å¸‚åœºè¡ŒåŠ¨æˆæœ¬
    MARKET_RESEARCH_COST = 500      # å¸‚åœºè°ƒç ”
    ADVERTISEMENT_COST = 800         # å¹¿å‘ŠæŠ•æ”¾
    PRODUCT_RESEARCH_COST = 600      # äº§å“ç ”å‘

    # 7ç§äº§å“é…æ–¹
    PRODUCT_RECIPES = [
        {
            "id": 1, "name": "å¥¶èŒ¶",
            "recipe": {"tea": 1, "milk": 2},
            "base_fan_rate": 0.05,  # 5%
            "difficulty": 1
        },
        {
            "id": 2, "name": "æ¤°å¥¶",
            "recipe": {"milk": 2, "ingredient": 1},
            "base_fan_rate": 0.05,
            "difficulty": 1
        },
        {
            "id": 3, "name": "æŸ æª¬èŒ¶",
            "recipe": {"tea": 1, "fruit": 1},
            "base_fan_rate": 0.05,
            "difficulty": 1
        },
        {
            "id": 4, "name": "æœæ±",
            "recipe": {"fruit": 3},
            "base_fan_rate": 0.05,
            "difficulty": 1
        },
        {
            "id": 5, "name": "çç å¥¶èŒ¶",
            "recipe": {"tea": 1, "milk": 2, "ingredient": 1},
            "base_fan_rate": 0.20,  # 20%
            "difficulty": 2
        },
        {
            "id": 6, "name": "æ°´æœå¥¶æ˜”",
            "recipe": {"milk": 2, "fruit": 2},
            "base_fan_rate": 0.20,
            "difficulty": 2
        },
        {
            "id": 7, "name": "æ°´æœèŒ¶",
            "recipe": {"tea": 1, "fruit": 2, "ingredient": 1},
            "base_fan_rate": 0.30,  # 30%
            "difficulty": 3
        }
    ]

    # å›ºå®š10å›åˆå®¢æµè„šæœ¬
    CUSTOMER_FLOW_SCRIPT = {
        1:  {"high": 40,  "low": 300},
        2:  {"high": 90,  "low": 280},
        3:  {"high": 140, "low": 360},
        4:  {"high": 40,  "low": 410},
        5:  {"high": 90,  "low": 360},
        6:  {"high": 140, "low": 510},
        7:  {"high": 140, "low": 360},
        8:  {"high": 90,  "low": 510},
        9:  {"high": 140, "low": 510},
        10: {"high": 190, "low": 610}
    }
```

### é‡è¦ä¸šåŠ¡è§„åˆ™

#### 1. åœˆç²‰ç‡æœºåˆ¶
- **å›ºå®šå€¼**ï¼šæ¯ç§äº§å“çš„åœˆç²‰ç‡ç”±é…æ–¹å†³å®šï¼ˆ5%/20%/30%ï¼‰
- **æ— ä¸‹é™æœºåˆ¶**ï¼šåœˆç²‰ç‡ä¸ä¼šéšå›åˆæ•°æˆ–é”€å”®æ•°å˜åŒ–
- **ä½œç”¨**ï¼šå‚ä¸å£ç¢‘åˆ†è®¡ç®—ï¼Œå½±å“å®¢æµåˆ†é…

#### 2. å¹¿å‘Šåˆ†æœºåˆ¶ï¼ˆå·²ä¿®æ”¹ï¼‰
- **ä¸ç´¯è®¡**ï¼šæ¯å›åˆçš„å¹¿å‘Šåˆ†ç‹¬ç«‹è®¡ç®—ï¼Œä¸å åŠ 
- **è®¾ç½®æ–¹å¼**ï¼šçº¿ä¸‹æ·éª°å­ï¼ˆ1-6ï¼‰ï¼Œçº¿ä¸Šè¾“å…¥ç»“æœ
- **ä½œç”¨åŸç†**ï¼š`å¹¿å‘Šåˆ†`ç›´æ¥æ›¿æ¢`current_ad_score`ï¼Œè€Œéç´¯åŠ 
- **å½±å“èŒƒå›´**ï¼šä»…å½±å“å½“å‰å›åˆçš„å£ç¢‘åˆ†è®¡ç®—

#### 3. å®šä»·é”å®šè§„åˆ™
- **è§„åˆ™**ï¼šä»»æ„è¿ç»­3å›åˆå†…ä»·æ ¼ä¸å¯ä¿®æ”¹
- **å®ç°**ï¼šè®°å½•`last_price_change_round`ï¼ŒéªŒè¯`round_number - last_price_change_round >= 3`
- **é¦–æ¬¡å®šä»·**ï¼šç¬¬ä¸€æ¬¡è®¾ç½®ä»·æ ¼ä¸å—é™åˆ¶

#### 4. ææ–™è¿‡æœŸæœºåˆ¶ï¼ˆæ–¹æ¡ˆAï¼‰
- **è§„åˆ™**ï¼šæ¯å›åˆç»“æŸåï¼Œæœªä½¿ç”¨çš„ææ–™ç›´æ¥æ¸…é›¶
- **å®ç°ä½ç½®**ï¼š`round_service.py:advance_round()`ä¸­åˆ é™¤`material_inventories`è®°å½•
- **ä¸é€€æ¬¾**ï¼šææ–™è´¹ç”¨å·²æ”¯ä»˜ï¼Œä¸é€€è¿˜ç°é‡‘

#### 5. å®¢æµåˆ†é…ä¼˜å…ˆçº§
**é«˜æ¶ˆè´¹å®¢æˆ·**ï¼š
1. å£ç¢‘åˆ†é«˜çš„äº§å“ä¼˜å…ˆ
2. å£ç¢‘ç›¸åŒï¼Œä»·æ ¼ä½çš„ä¼˜å…ˆ

**ä½æ¶ˆè´¹å®¢æˆ·**ï¼š
1. åªåˆ†é…ç»™å£ç¢‘åˆ†>0çš„äº§å“
2. ä»·æ ¼ä½çš„ä¼˜å…ˆ
3. ä»·æ ¼ç›¸åŒï¼Œå£ç¢‘é«˜çš„ä¼˜å…ˆ

---

## æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“è¿æ¥ä¿¡æ¯
- **æ‰˜ç®¡å¹³å°**: Zeaburäº‘æœåŠ¡
- **æ•°æ®åº“ç±»å‹**: MySQL 8.x
- **è¿æ¥é…ç½®**: `backend/app/core/config.py:DATABASE_URL`
- **åˆå§‹åŒ–è„šæœ¬**: `backend/scripts/setup_database.py`

### æ•°æ®è¡¨ç»“æ„ï¼ˆ12å¼ è¡¨ï¼‰

#### 1. games - æ¸¸æˆæˆ¿é—´
```sql
id              INT PRIMARY KEY
room_code       VARCHAR(6) UNIQUE    -- æˆ¿é—´ç 
name            VARCHAR(100)         -- æ¸¸æˆåç§°
max_players     INT DEFAULT 4
current_round   INT DEFAULT 1
status          ENUM('waiting', 'in_progress', 'finished')
created_at      TIMESTAMP
```

#### 2. players - ç©å®¶
```sql
id              INT PRIMARY KEY
game_id         INT FK -> games.id
name            VARCHAR(50)          -- ç©å®¶æ˜µç§°
cash            DECIMAL(10,2) DEFAULT 10000.00
is_ready        BOOLEAN DEFAULT FALSE
turn_order      INT                  -- è¡ŒåŠ¨é¡ºåºï¼ˆ1-4ï¼‰
status          ENUM('active', 'bankrupt')
```

#### 3. shops - é—¨åº—
```sql
id                  INT PRIMARY KEY
player_id           INT FK -> players.id
location            VARCHAR(50)      -- å•†åœˆåç§°
rent                DECIMAL(6,2)     -- æ¯å›åˆç§Ÿé‡‘
decoration_level    INT DEFAULT 0    -- 0-3
max_employees       INT              -- æœ€å¤§å‘˜å·¥æ•°
created_round       INT
```

#### 4. employees - å‘˜å·¥
```sql
id              INT PRIMARY KEY
shop_id         INT FK -> shops.id
name            VARCHAR(50)
salary          DECIMAL(6,2)
productivity    INT                  -- ç”Ÿäº§åŠ›å€¼
hired_round     INT
is_active       BOOLEAN DEFAULT TRUE
```

#### 5. product_recipes - äº§å“é…æ–¹ï¼ˆå›ºå®š7ç§ï¼‰
```sql
id              INT PRIMARY KEY
name            VARCHAR(50) UNIQUE
difficulty      INT                  -- 1-3
base_fan_rate   DECIMAL(5,2)        -- åœˆç²‰ç‡ï¼ˆ0.05/0.20/0.30ï¼‰
cost_per_unit   DECIMAL(6,2)        -- å•ä½æˆæœ¬
recipe_json     JSON                -- {"tea": 1, "milk": 2}
is_active       BOOLEAN DEFAULT TRUE
```

#### 6. player_products - ç©å®¶å·²è§£é”äº§å“
```sql
id                      INT PRIMARY KEY
player_id               INT FK -> players.id
recipe_id               INT FK -> product_recipes.id
is_unlocked             BOOLEAN DEFAULT FALSE
unlocked_round          INT
total_sold              INT DEFAULT 0        -- ç´¯è®¡é”€å”®æ•°
current_price           DECIMAL(6,2)
current_ad_score        INT DEFAULT 0        -- å½“å‰å¹¿å‘Šåˆ†ï¼ˆæ¯å›åˆé‡ç½®ï¼‰
last_price_change_round INT DEFAULT 0        -- ä¸Šæ¬¡ä¿®æ”¹ä»·æ ¼çš„å›åˆ
```

#### 7. round_productions - å›åˆç”Ÿäº§è®¡åˆ’
```sql
id                      INT PRIMARY KEY
player_id               INT FK -> players.id
round_number            INT
product_id              INT                  -- player_products.id
allocated_productivity  INT                  -- åˆ†é…çš„ç”Ÿäº§åŠ›
price                   DECIMAL(6,2)         -- å®šä»·
produced_quantity       INT                  -- ç”Ÿäº§æ•°é‡
sold_quantity           INT                  -- å®é™…é”€å”®æ•°
sold_to_high_tier       INT                  -- é«˜æ¶ˆè´¹å®¢æˆ·è´­ä¹°æ•°
sold_to_low_tier        INT                  -- ä½æ¶ˆè´¹å®¢æˆ·è´­ä¹°æ•°
revenue                 DECIMAL(10,2)        -- é”€å”®æ”¶å…¥
```

#### 8. material_inventories - ææ–™åº“å­˜
```sql
id              INT PRIMARY KEY
player_id       INT FK -> players.id
round_number    INT                  -- è´­ä¹°å›åˆ
material_type   VARCHAR(20)          -- tea/milk/fruit/ingredient
quantity        INT
unit_price      DECIMAL(6,2)         -- å®é™…è´­ä¹°ä»·æ ¼ï¼ˆå«æŠ˜æ‰£ï¼‰
total_cost      DECIMAL(10,2)
```
**é‡è¦**ï¼šæ¯å›åˆç»“æŸæ—¶ï¼Œåˆ é™¤æœ¬å›åˆçš„æ‰€æœ‰è®°å½•ï¼ˆææ–™è¿‡æœŸæ¸…é›¶ï¼‰

#### 9. finance_records - è´¢åŠ¡è®°å½•
```sql
id              INT PRIMARY KEY
player_id       INT FK -> players.id
round_number    INT
revenue         DECIMAL(10,2)        -- æ”¶å…¥
expenses        DECIMAL(10,2)        -- æ”¯å‡º
profit          DECIMAL(10,2)        -- åˆ©æ¶¦
cash_balance    DECIMAL(10,2)        -- å‰©ä½™ç°é‡‘
created_at      TIMESTAMP
```

#### 10. customer_flows - å®¢æµæ•°æ®
```sql
id                      INT PRIMARY KEY
game_id                 INT FK -> games.id
round_number            INT
high_tier_customers     INT              -- é«˜æ¶ˆè´¹å®¢æˆ·æ•°
low_tier_customers      INT              -- ä½æ¶ˆè´¹å®¢æˆ·æ•°
```

#### 11. research_logs - ç ”å‘æ—¥å¿—
```sql
id              INT PRIMARY KEY
player_id       INT FK -> players.id
recipe_id       INT FK -> product_recipes.id
round_number    INT
dice_result     INT                  -- æ·éª°ç»“æœï¼ˆ1-6ï¼‰
success         BOOLEAN              -- æ˜¯å¦æˆåŠŸ
cost            DECIMAL(6,2)         -- ç ”å‘è´¹ç”¨ï¼ˆ600ï¼‰
created_at      TIMESTAMP
```

#### 12. market_actions - å¸‚åœºè¡ŒåŠ¨æ—¥å¿—
```sql
id              INT PRIMARY KEY
player_id       INT FK -> players.id
round_number    INT
action_type     ENUM('ad', 'research')  -- å¹¿å‘Š/è°ƒç ”
cost            DECIMAL(6,2)
result_value    INT                     -- å¹¿å‘Šåˆ†ï¼ˆä»…adç±»å‹æœ‰å€¼ï¼‰
created_at      TIMESTAMP
```

---

## APIæ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:8000/api/v1`
- **å“åº”æ ¼å¼**: JSON
- **æˆåŠŸå“åº”**: `{"success": true, "data": {...}}`
- **é”™è¯¯å“åº”**: `{"success": false, "error": "é”™è¯¯ä¿¡æ¯"}`

### æ¸¸æˆç®¡ç† (/games)

#### POST /games/create
åˆ›å»ºæ¸¸æˆæˆ¿é—´
```json
// Request
{
  "game_name": "æµ‹è¯•æˆ¿é—´",
  "max_players": 4
}

// Response
{
  "success": true,
  "data": {
    "room_code": "ABC123",
    "game_id": 1,
    "name": "æµ‹è¯•æˆ¿é—´",
    "max_players": 4,
    "status": "waiting"
  }
}
```

#### POST /players/join/{room_code}
åŠ å…¥æ¸¸æˆæˆ¿é—´
```json
// Request
{
  "player_name": "ç©å®¶1"
}

// Response
{
  "success": true,
  "data": {
    "player_id": 1,
    "game_id": 1,
    "name": "ç©å®¶1",
    "cash": 10000.0,
    "turn_order": 1
  }
}
```

#### GET /games/{room_code}
è·å–æˆ¿é—´ä¿¡æ¯
```json
// Response
{
  "success": true,
  "data": {
    "id": 1,
    "room_code": "ABC123",
    "name": "æµ‹è¯•æˆ¿é—´",
    "current_round": 1,
    "status": "in_progress",
    "players": [
      {
        "id": 1,
        "name": "ç©å®¶1",
        "cash": 10000.0,
        "is_ready": true,
        "turn_order": 1
      }
    ]
  }
}
```

#### POST /games/{room_code}/start
å¼€å§‹æ¸¸æˆï¼ˆä»…æˆ¿ä¸»ï¼‰
```json
// Response
{
  "success": true,
  "message": "Game started successfully"
}
```

### é—¨åº—ç®¡ç† (/shops)

#### POST /shops/open
å¼€è®¾é—¨åº—
```json
// Request
{
  "player_id": 1,
  "location": "å•†ä¸šè¡—",
  "decoration_level": 1
}

// Response
{
  "success": true,
  "data": {
    "id": 1,
    "player_id": 1,
    "location": "å•†ä¸šè¡—",
    "rent": 1200.0,
    "decoration_level": 1,
    "max_employees": 2
  }
}
```

#### POST /shops/{player_id}/upgrade
å‡çº§è£…ä¿®
```json
// Request
{
  "target_level": 2
}

// Response
{
  "success": true,
  "data": {
    "id": 1,
    "decoration_level": 2,
    "max_employees": 3,
    "upgrade_cost": 800.0,
    "remaining_cash": 9200.0
  }
}
```

### å‘˜å·¥ç®¡ç† (/employees)

#### POST /employees/hire
æ‹›è˜å‘˜å·¥
```json
// Request
{
  "player_id": 1,
  "name": "å¼ ä¸‰",
  "salary": 1000,
  "productivity": 5,
  "round_number": 1
}

// Response
{
  "success": true,
  "data": {
    "id": 1,
    "shop_id": 1,
    "name": "å¼ ä¸‰",
    "salary": 1000.0,
    "productivity": 5,
    "hired_round": 1,
    "is_active": true
  }
}
```

#### POST /employees/{employee_id}/fire
è§£é›‡å‘˜å·¥
```json
// Response
{
  "success": true,
  "message": "Employee å¼ ä¸‰ has been fired",
  "employee_id": 1
}
```

#### GET /employees/player/{player_id}
è·å–å‘˜å·¥åˆ—è¡¨
```json
// Response
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "å¼ ä¸‰",
      "salary": 1000.0,
      "productivity": 5,
      "is_active": true
    }
  ]
}
```

#### GET /employees/player/{player_id}/productivity
è·å–æ€»ç”Ÿäº§åŠ›
```json
// Response
{
  "success": true,
  "data": {
    "player_id": 1,
    "total_productivity": 15
  }
}
```

### äº§å“ç ”å‘ (/products)

#### POST /products/research
äº§å“ç ”å‘ï¼ˆçº¿ä¸‹æ·éª°å­ï¼‰
```json
// Request
{
  "player_id": 1,
  "recipe_id": 7,
  "round_number": 1,
  "dice_result": 5
}

// Response
{
  "success": true,
  "data": {
    "dice_result": 5,
    "required_roll": 4,
    "research_success": true,
    "product_unlocked": true,
    "product_name": "æ°´æœèŒ¶",
    "difficulty": 3,
    "cost": 600,
    "remaining_cash": 9400.0
  }
}
```

#### GET /products/recipes?player_id={player_id}
è·å–æ‰€æœ‰é…æ–¹ï¼ˆå«è§£é”çŠ¶æ€ï¼‰
```json
// Response
{
  "success": true,
  "data": [
    {
      "recipe_id": 1,
      "name": "å¥¶èŒ¶",
      "recipe_json": {"tea": 1, "milk": 2},
      "base_fan_rate": 0.05,
      "is_unlocked": true,
      "research_cost": 600
    }
  ]
}
```

#### GET /products/player/{player_id}/unlocked
è·å–å·²è§£é”äº§å“
```json
// Response
{
  "success": true,
  "data": [
    {
      "id": 1,
      "recipe_id": 1,
      "recipe_name": "å¥¶èŒ¶",
      "current_ad_score": 3,
      "total_sold": 50,
      "current_price": 15.0
    }
  ]
}
```

### å¸‚åœºè¡ŒåŠ¨ (/market)

#### POST /market/advertisement
æŠ•æ”¾å¹¿å‘Šï¼ˆçº¿ä¸‹æ·éª°å­ï¼‰
```json
// Request
{
  "player_id": 1,
  "product_id": 1,
  "round_number": 1,
  "dice_result": 5
}

// Response
{
  "success": true,
  "data": {
    "dice_result": 5,
    "current_ad_score": 5,
    "product_name": "å¥¶èŒ¶",
    "cost": 800,
    "remaining_cash": 9200.0
  }
}
```

#### POST /market/research
å¸‚åœºè°ƒç ”ï¼ˆæŸ¥çœ‹ä¸‹å›åˆå®¢æµï¼‰
```json
// Request
{
  "player_id": 1,
  "round_number": 1
}

// Response
{
  "success": true,
  "data": {
    "cost": 500,
    "next_round": 2,
    "customer_flow": {
      "high_tier_customers": 90,
      "low_tier_customers": 280
    },
    "remaining_cash": 9500.0
  }
}
```

### ç”Ÿäº§å†³ç­– (/production)

#### POST /production/submit
æäº¤ç”Ÿäº§è®¡åˆ’
```json
// Request
{
  "player_id": 1,
  "round_number": 1,
  "productions": [
    {
      "product_id": 1,
      "productivity": 10,
      "price": 15.0
    }
  ]
}

// Response
{
  "success": true,
  "data": {
    "player_id": 1,
    "round_number": 1,
    "total_material_cost": 240.0,
    "remaining_cash": 9760.0
  }
}
```

### å›åˆç®¡ç† (/rounds)

#### POST /rounds/{game_id}/advance
æ¨è¿›å›åˆï¼ˆæ‰€æœ‰ç©å®¶å†³ç­–å®Œæˆåï¼‰
```json
// Response
{
  "success": true,
  "data": {
    "game_id": 1,
    "new_round": 2,
    "message": "Round advanced successfully"
  }
}
```

#### GET /rounds/{game_id}/{round_number}/summary
è·å–å›åˆæ€»ç»“
```json
// Response
{
  "success": true,
  "data": {
    "round_number": 1,
    "player_summaries": [
      {
        "player_id": 1,
        "player_name": "ç©å®¶1",
        "revenue": 750.0,
        "expenses": 1640.0,
        "profit": -890.0,
        "cash_balance": 9110.0
      }
    ]
  }
}
```

### è´¢åŠ¡ (/finance)

#### GET /finance/player/{player_id}/records?round_number={round}
è·å–è´¢åŠ¡è®°å½•
```json
// Response
{
  "success": true,
  "data": [
    {
      "id": 1,
      "round_number": 1,
      "revenue": 750.0,
      "expenses": 1640.0,
      "profit": -890.0,
      "cash_balance": 9110.0
    }
  ]
}
```

#### GET /finance/game/{game_id}/profit-summary
è·å–åˆ©æ¶¦æ€»ç»“ï¼ˆæœ€ç»ˆæ’åï¼‰
```json
// Response
{
  "success": true,
  "data": [
    {
      "player_id": 1,
      "player_name": "ç©å®¶1",
      "total_profit": 5000.0,
      "final_cash": 15000.0,
      "rank": 1
    }
  ]
}
```

---

## å‰ç«¯ç»„ä»¶è¯´æ˜

### é¡µé¢ç»„ä»¶ (pages/)

#### Lobby.tsx - æ¸¸æˆå¤§å…
**åŠŸèƒ½**ï¼š
- åˆ›å»ºæˆ¿é—´ï¼ˆè¾“å…¥æˆ¿é—´åã€æœ€å¤§ç©å®¶æ•°ï¼‰
- åŠ å…¥æˆ¿é—´ï¼ˆè¾“å…¥æˆ¿é—´ç ã€ç©å®¶æ˜µç§°ï¼‰
- è·¯ç”±è·³è½¬è‡³Roomé¡µé¢

**çŠ¶æ€ç®¡ç†**ï¼š
- ä½¿ç”¨`gameStore`å­˜å‚¨æ¸¸æˆä¿¡æ¯
- è°ƒç”¨`gameApi.createGame()` / `playerApi.joinGame()`

#### Room.tsx - ç­‰å¾…æˆ¿é—´
**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºæˆ¿é—´ç 
- æ˜¾ç¤ºå·²åŠ å…¥ç©å®¶åˆ—è¡¨
- ç©å®¶å‡†å¤‡/å–æ¶ˆå‡†å¤‡
- æˆ¿ä¸»å¼€å§‹æ¸¸æˆæŒ‰é’®
- è½®è¯¢è·å–æˆ¿é—´çŠ¶æ€ï¼ˆæ£€æµ‹æ¸¸æˆæ˜¯å¦å¼€å§‹ï¼‰

**çŠ¶æ€ç®¡ç†**ï¼š
- ä½¿ç”¨`gameStore`å­˜å‚¨ç©å®¶åˆ—è¡¨
- è°ƒç”¨`playerApi.toggleReady()` / `gameApi.startGame()`

#### Game.tsx - æ¸¸æˆä¸»ç•Œé¢ âœ…
**åŠŸèƒ½**ï¼š
- æ¸¸æˆå¤´éƒ¨ï¼ˆå›åˆæ•°ã€ç©å®¶ä¿¡æ¯ï¼‰
- ç©å®¶åˆ—è¡¨ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ç©å®¶çŠ¶æ€ï¼‰
- å†³ç­–é¢æ¿åˆ‡æ¢ï¼ˆ5ä¸ªå†³ç­–æ­¥éª¤ï¼‰
- å›åˆæ€»ç»“æ˜¾ç¤º
- æ¸¸æˆç»“æŸç•Œé¢

**çŠ¶æ€ç®¡ç†**ï¼š
- ä½¿ç”¨`gameStore` + `gameRoundStore` + `decisionStore`
- è½®è¯¢æ¸¸æˆçŠ¶æ€ï¼ˆæ¯5ç§’æ£€æŸ¥å›åˆå˜åŒ–ï¼‰

**å·²å®ç°**ï¼š
- âœ… åŸºç¡€å¸ƒå±€å’Œè·¯ç”±
- âœ… å†³ç­–é¢æ¿åˆ‡æ¢é€»è¾‘
- âœ… çŠ¶æ€è½®è¯¢æœºåˆ¶

**å¾…å®Œå–„**ï¼š
- ğŸš§ å†³ç­–å®Œæˆåˆ¤å®š
- ğŸš§ è‡ªåŠ¨è¿›å…¥å›åˆæ€»ç»“
- ğŸš§ æ¸¸æˆç»“æŸæ£€æµ‹

### æ¸¸æˆç»„ä»¶ (components/game/)

#### ShopDecision.tsx - é—¨åº—å†³ç­– âœ…
**åŠŸèƒ½**ï¼š
- å¼€è®¾é—¨åº—ï¼ˆ3ä¸ªå•†åœˆé€‰æ‹©ï¼‰
- å‡çº§è£…ä¿®ï¼ˆ3ä¸ªç­‰çº§ï¼‰
- æ˜¾ç¤ºå½“å‰é—¨åº—ä¿¡æ¯ï¼ˆç§Ÿé‡‘ã€è£…ä¿®ç­‰çº§ã€å‘˜å·¥å®¹é‡ï¼‰

**çŠ¶æ€**ï¼šå®Œå…¨å®ç°

#### EmployeeManagement.tsx - å‘˜å·¥ç®¡ç† âœ…
**åŠŸèƒ½**ï¼š
- æ‹›è˜å‘˜å·¥è¡¨å•ï¼ˆå§“åã€å·¥èµ„ã€ç”Ÿäº§åŠ›æ‰‹åŠ¨è¾“å…¥ï¼‰
- å‘˜å·¥åˆ—è¡¨ï¼ˆè¡¨æ ¼å±•ç¤ºï¼‰
- è§£é›‡å‘˜å·¥ï¼ˆç¡®è®¤å¯¹è¯æ¡†ï¼‰
- æ€»ç”Ÿäº§åŠ›/æ€»å·¥èµ„ç»Ÿè®¡

**çŠ¶æ€**ï¼šå®Œå…¨å®ç°

#### ProductResearch.tsx - äº§å“ç ”å‘ âœ…
**åŠŸèƒ½**ï¼š
- æ˜¾ç¤º7ç§é…æ–¹å¡ç‰‡ï¼ˆå«éš¾åº¦ã€æˆåŠŸç‡ã€åœˆç²‰ç‡ï¼‰
- ç ”å‘æµç¨‹ï¼šé€‰æ‹©é…æ–¹ â†’ éª°å­åŠ¨ç”»æç¤º â†’ è¾“å…¥ç»“æœ â†’ æäº¤éªŒè¯
- æˆåŠŸ/å¤±è´¥å¼¹çª—æç¤º
- å·²è§£é”é…æ–¹æ ‡è®°

**çŠ¶æ€**ï¼šå®Œå…¨å®ç°

#### MarketAction.tsx - å¸‚åœºè¡ŒåŠ¨ âœ…
**åŠŸèƒ½**ï¼š
- å¹¿å‘ŠæŠ•æ”¾ï¼šé€‰æ‹©äº§å“ â†’ éª°å­è¾“å…¥ â†’ è®¾ç½®å¹¿å‘Šåˆ†ï¼ˆæ›¿æ¢ï¼Œéç´¯åŠ ï¼‰
- å¸‚åœºè°ƒç ”ï¼šæŸ¥çœ‹ä¸‹å›åˆå®¢æµæ•°æ®ï¼ˆé«˜/ä½æ¶ˆè´¹å®¢æˆ·ï¼‰

**çŠ¶æ€**ï¼šå®Œå…¨å®ç°

#### ProductionPlan.tsx - ç”Ÿäº§å†³ç­– ğŸš§
**å½“å‰çŠ¶æ€**ï¼šå ä½ç¬¦ç»„ä»¶ï¼Œåªæ˜¾ç¤ºTODOåˆ—è¡¨

**éœ€è¦å®ç°**ï¼š
- [ ] æ˜¾ç¤ºå·²è§£é”äº§å“åˆ—è¡¨
- [ ] ç”Ÿäº§åŠ›åˆ†é…è¾“å…¥ï¼ˆæ€»ç”Ÿäº§åŠ› = æ‰€æœ‰å‘˜å·¥ç”Ÿäº§åŠ›ä¹‹å’Œï¼‰
- [ ] å®šä»·è¾“å…¥ï¼ˆ10-40å…ƒï¼Œ5çš„å€æ•°ï¼‰
- [ ] å®šä»·é”å®šæç¤ºï¼ˆå¦‚æœåœ¨3å›åˆå†…ï¼‰
- [ ] è‡ªåŠ¨è®¡ç®—æ‰€éœ€ææ–™
- [ ] ææ–™é‡‡è´­ç•Œé¢ï¼ˆæ˜¾ç¤ºæ‰¹é‡æŠ˜æ‰£ï¼‰
- [ ] æäº¤ç”Ÿäº§è®¡åˆ’æŒ‰é’®

**å‚è€ƒè®¾è®¡**ï¼š
```typescript
// ç”Ÿäº§è®¡åˆ’æ•°æ®ç»“æ„
interface ProductionItem {
  product_id: number;
  product_name: string;
  productivity: number;      // åˆ†é…çš„ç”Ÿäº§åŠ›
  price: number;             // å®šä»·
  materials_needed: {        // æ‰€éœ€ææ–™
    tea?: number;
    milk?: number;
    fruit?: number;
    ingredient?: number;
  };
  material_cost: number;     // ææ–™æ€»æˆæœ¬
}
```

#### RoundSummary.tsx - å›åˆæ€»ç»“ ğŸš§
**å½“å‰çŠ¶æ€**ï¼šå ä½ç¬¦ç»„ä»¶

**éœ€è¦å®ç°**ï¼š
- [ ] æ˜¾ç¤ºæœ¬å›åˆå®¢æµæ•°æ®
- [ ] æ˜¾ç¤ºæ‰€æœ‰ç©å®¶ç”Ÿäº§æƒ…å†µï¼ˆäº§å“ã€å®šä»·ã€é”€é‡ï¼‰
- [ ] æ˜¾ç¤ºé”€å”®ç»“æœï¼ˆå–ç»™é«˜/ä½æ¶ˆè´¹å®¢æˆ·æ•°é‡ï¼‰
- [ ] æ˜¾ç¤ºè´¢åŠ¡æŠ¥è¡¨ï¼ˆæ”¶å…¥ã€æ”¯å‡ºã€åˆ©æ¶¦ï¼‰
- [ ] æ˜¾ç¤ºå‰©ä½™ç°é‡‘
- [ ] "è¿›å…¥ä¸‹ä¸€å›åˆ"æŒ‰é’®

#### GameEnd.tsx - æ¸¸æˆç»“æŸ ğŸš§
**å½“å‰çŠ¶æ€**ï¼šå ä½ç¬¦ç»„ä»¶

**éœ€è¦å®ç°**ï¼š
- [ ] æ˜¾ç¤ºæœ€ç»ˆæ’åï¼ˆ1-4åï¼‰
- [ ] æ˜¾ç¤ºæ¯ä¸ªç©å®¶çš„ç´¯è®¡åˆ©æ¶¦
- [ ] æ˜¾ç¤ºè·èƒœè€…åŠ¨ç”»
- [ ] "è¿”å›å¤§å…"æŒ‰é’®

#### DiceRoller.tsx - éª°å­åŠ¨ç”» âœ…
**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºéª°å­å›¾æ ‡åŠ¨ç”»
- ç”¨äºæç¤ºç©å®¶çº¿ä¸‹æ·éª°å­
- çº¯å±•ç¤ºç»„ä»¶ï¼Œæ— äº¤äº’

**çŠ¶æ€**ï¼šå®Œå…¨å®ç°

---

## å¼€å‘ç¯å¢ƒé…ç½®

### å‰ç½®è¦æ±‚
- **Node.js**: v18+ (æ¨èv20)
- **Python**: 3.9+
- **MySQL**: 8.0+ (å·²ç”±Zeaburæ‰˜ç®¡)
- **æ“ä½œç³»ç»Ÿ**: Windows/macOS/Linux

### åç«¯å¯åŠ¨æ­¥éª¤

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
python -m venv venv

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# 4. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 5. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆä»…é¦–æ¬¡è¿è¡Œï¼Œæˆ–é‡ç½®æ•°æ®åº“æ—¶ï¼‰
python scripts/setup_database.py

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python run.py

# æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:8000
# APIæ–‡æ¡£: http://localhost:8000/docs (å¦‚æœé…ç½®äº†Swagger)
```

**æ³¨æ„äº‹é¡¹**ï¼š
- æ•°æ®åº“é…ç½®åœ¨`app/core/config.py`ä¸­
- å¦‚éœ€ä¿®æ”¹ç«¯å£ï¼Œç¼–è¾‘`run.py`æ–‡ä»¶
- æ—¥å¿—ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼ˆé¿å…ä½¿ç”¨emojiï¼ŒWindowsç»ˆç«¯ä¸æ”¯æŒï¼‰

### å‰ç«¯å¯åŠ¨æ­¥éª¤

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:5173
# Viteä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
```

**æ³¨æ„äº‹é¡¹**ï¼š
- ç¡®ä¿åç«¯å·²å¯åŠ¨ï¼ˆå‰ç«¯ä¾èµ–åç«¯APIï¼‰
- å¦‚é‡CORSé”™è¯¯ï¼Œæ£€æŸ¥åç«¯`app/main.py`ä¸­çš„CORSé…ç½®
- çƒ­æ›´æ–°å·²å¯ç”¨ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨åˆ·æ–°

### æ•°æ®åº“ç®¡ç†

#### åˆå§‹åŒ–æ•°æ®åº“
```bash
cd backend
python scripts/setup_database.py
```
**ä½œç”¨**ï¼š
- åˆ›å»ºæ‰€æœ‰12å¼ è¡¨
- æ’å…¥7ç§äº§å“é…æ–¹ç§å­æ•°æ®
- å¹‚ç­‰æ“ä½œï¼ˆå¯é‡å¤è¿è¡Œï¼‰

#### æ¸…ç©ºæ¸¸æˆæ•°æ®ï¼ˆæµ‹è¯•ç”¨ï¼‰
```bash
cd backend
python scripts/clear_all_games.py
```
**ä½œç”¨**ï¼š
- åˆ é™¤æ‰€æœ‰æ¸¸æˆã€ç©å®¶ã€é—¨åº—ã€å‘˜å·¥ç­‰æ•°æ®
- **ä¿ç•™**äº§å“é…æ–¹è¡¨ï¼ˆproduct_recipesï¼‰
- ç”¨äºå¿«é€Ÿé‡ç½®æµ‹è¯•ç¯å¢ƒ

#### æ•°æ®åº“è¿ç§»è„šæœ¬
- `scripts/add_turn_order.py` - æ·»åŠ turn_orderå­—æ®µï¼ˆå·²åº”ç”¨ï¼‰
- `scripts/add_game_name.py` - æ·»åŠ game_nameå­—æ®µï¼ˆå·²åº”ç”¨ï¼‰

### å¸¸è§é—®é¢˜æ’æŸ¥

#### 1. CORSé”™è¯¯
**ç—‡çŠ¶**ï¼šå‰ç«¯æ§åˆ¶å°æ˜¾ç¤º`Access to XMLHttpRequest blocked by CORS policy`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥åç«¯`app/main.py`ä¸­çš„CORSé…ç½®ï¼š
```python
CORS(app, resources={
    r"/api/*": {
        "origins": "*",  # å¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰æ¥æº
        "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"],
        "supports_credentials": False
    }
})
```
2. é‡å¯åç«¯æœåŠ¡å™¨ï¼ˆé…ç½®ä¿®æ”¹åéœ€è¦é‡å¯ï¼‰

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
**ç—‡çŠ¶**ï¼šåç«¯å¯åŠ¨æŠ¥é”™`Can't connect to MySQL server`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥`app/core/config.py`ä¸­çš„DATABASE_URL
2. ç¡®è®¤Zeaburæ•°æ®åº“æœåŠ¡æ­£å¸¸è¿è¡Œ
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

#### 3. å‰ç«¯æ‰“åŒ…å¤±è´¥
**ç—‡çŠ¶**ï¼š`npm run build`æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ é™¤`node_modules`å’Œ`package-lock.json`
2. é‡æ–°å®‰è£…ï¼š`npm install`
3. æ£€æŸ¥TypeScriptç±»å‹é”™è¯¯

#### 4. Viteç«¯å£è¢«å ç”¨
**ç—‡çŠ¶**ï¼šå¯åŠ¨æ—¶æç¤º`Port 5173 is already in use`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Windows:
taskkill /F /PID <è¿›ç¨‹ID>

# macOS/Linux:
lsof -ti:5173 | xargs kill -9
```

---

## å·²çŸ¥é—®é¢˜

### âš ï¸ é«˜ä¼˜å…ˆçº§é—®é¢˜

#### 1. ç”Ÿäº§å†³ç­–ç³»ç»Ÿæœªå®ç°
**å½±å“**ï¼šç©å®¶æ— æ³•å®Œæˆç”Ÿäº§å†³ç­–ï¼Œæ¸¸æˆæ— æ³•æ­£å¸¸æ¨è¿›

**å¾…ä¿®å¤**ï¼š
- å®ç°ProductionPlan.tsxç»„ä»¶
- ææ–™é‡‡è´­é€»è¾‘
- ç”Ÿäº§è®¡åˆ’æäº¤éªŒè¯

#### 2. å›åˆæ¨è¿›é€»è¾‘ä¸å®Œæ•´
**å½±å“**ï¼šå›åˆæ— æ³•æ­£å¸¸ç»“ç®—å’Œæ¨è¿›

**å¾…ä¿®å¤**ï¼š
- è¡¥å……å®¢æµåˆ†é…ç®—æ³•è°ƒç”¨
- ææ–™åº“å­˜æ¸…é›¶é€»è¾‘
- è´¢åŠ¡æŠ¥è¡¨ç”Ÿæˆ

#### 3. ææ–™è¿‡æœŸæœºåˆ¶æœªå®ç°
**å½±å“**ï¼šææ–™åº“å­˜ä¸ä¼šæ¸…é›¶ï¼Œå½±å“æ¸¸æˆå¹³è¡¡

**å¾…ä¿®å¤**ï¼š
- åœ¨`round_service.py:advance_round()`ä¸­æ·»åŠ ï¼š
```python
# æ¸…ç©ºæœ¬å›åˆçš„ææ–™åº“å­˜ï¼ˆæ–¹æ¡ˆAï¼šç›´æ¥æ¸…é›¶ï¼‰
MaterialInventory.query.filter_by(
    game_id=game_id,
    round_number=round_number
).delete()
```

### âš ï¸ ä¸­ä¼˜å…ˆçº§é—®é¢˜

#### 4. å†³ç­–æµç¨‹æ§åˆ¶ä¸å®Œå–„
**ç°è±¡**ï¼šç©å®¶å¯ä»¥è·³è¿‡å†³ç­–æ­¥éª¤ï¼Œæˆ–é‡å¤æäº¤

**å¾…ä¼˜åŒ–**ï¼š
- æ·»åŠ å†³ç­–æ­¥éª¤å®Œæˆæ ‡è®°
- å¼ºåˆ¶æŒ‰é¡ºåºå®Œæˆå†³ç­–
- "æäº¤å†³ç­–"æŒ‰é’®é”å®šæ‰€æœ‰æ­¥éª¤

#### 5. ç­‰å¾…ç•Œé¢ç¼ºå¤±
**ç°è±¡**ï¼šç©å®¶å®Œæˆå†³ç­–åä¸çŸ¥é“å…¶ä»–ç©å®¶è¿›åº¦

**å¾…ä¼˜åŒ–**ï¼š
- æ˜¾ç¤ºå…¶ä»–ç©å®¶å†³ç­–çŠ¶æ€ï¼ˆå·²å®Œæˆ/æœªå®Œæˆï¼‰
- ç­‰å¾…åŠ¨ç”»
- è¿›åº¦æ¡

#### 6. å›åˆæ€»ç»“æœªå®ç°
**ç°è±¡**ï¼šå›åˆç»“æŸåæ— æ³•æŸ¥çœ‹è¯¦ç»†ç»“æœ

**å¾…å®ç°**ï¼š
- RoundSummary.tsxç»„ä»¶
- è´¢åŠ¡æŠ¥è¡¨å±•ç¤º
- é”€å”®ç»“æœå¯¹æ¯”

### âš ï¸ ä½ä¼˜å…ˆçº§é—®é¢˜

#### 7. UIæ ·å¼ç»†èŠ‚
**ç°è±¡**ï¼šéƒ¨åˆ†ç»„ä»¶æ ·å¼ä¸ç»Ÿä¸€

**å¾…ä¼˜åŒ–**ï¼š
- ç»Ÿä¸€å¡ç‰‡æ ·å¼
- ä¼˜åŒ–ç§»åŠ¨ç«¯é€‚é…
- æ·»åŠ åŠ è½½åŠ¨ç”»

#### 8. é”™è¯¯æç¤ºä¸å‹å¥½
**ç°è±¡**ï¼šéƒ¨åˆ†é”™è¯¯ä¿¡æ¯ä¸ºè‹±æ–‡æˆ–æŠ€æœ¯æœ¯è¯­

**å¾…ä¼˜åŒ–**ï¼š
- ç»Ÿä¸€é”™è¯¯æç¤ºæ–‡æ¡ˆ
- æ·»åŠ é”™è¯¯ç æ˜ å°„
- ä¸­æ–‡åŒ–æ‰€æœ‰æç¤º

---

## éƒ¨ç½²è¯´æ˜

### å‰ç«¯éƒ¨ç½²

#### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
cd frontend
npm run build
```
è¾“å‡ºç›®å½•ï¼š`frontend/dist/`

#### éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡ï¼ˆæ¨èï¼‰
- **Vercel**: ç›´æ¥è¿æ¥GitHubä»“åº“è‡ªåŠ¨éƒ¨ç½²
- **Netlify**: æ‹–æ‹½`dist`æ–‡ä»¶å¤¹ä¸Šä¼ 
- **é˜¿é‡Œäº‘OSS**: é…ç½®é™æ€ç½‘ç«™æ‰˜ç®¡

#### ç¯å¢ƒå˜é‡é…ç½®
ä¿®æ”¹`frontend/src/api/client.ts`ä¸­çš„API base URLï¼š
```typescript
const API_BASE_URL = process.env.VITE_API_BASE_URL || 'http://localhost:8000/api/v1';
```

åˆ›å»º`.env.production`æ–‡ä»¶ï¼š
```
VITE_API_BASE_URL=https://your-backend-domain.com/api/v1
```

### åç«¯éƒ¨ç½²

#### æ–¹æ¡ˆ1: Zeaburéƒ¨ç½²ï¼ˆæ¨èï¼‰
1. è¿æ¥GitHubä»“åº“
2. é€‰æ‹©`backend`ç›®å½•
3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   - `DATABASE_URL`
   - `SECRET_KEY`
   - `CORS_ORIGINS`
4. è‡ªåŠ¨éƒ¨ç½²

#### æ–¹æ¡ˆ2: æœåŠ¡å™¨éƒ¨ç½²
```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. é…ç½®ç”Ÿäº§ç¯å¢ƒ
export FLASK_ENV=production
export DATABASE_URL=mysql+pymysql://user:pass@host:port/db

# 3. ä½¿ç”¨Gunicornè¿è¡Œ
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:8000 app.main:app
```

#### æ–¹æ¡ˆ3: Dockeréƒ¨ç½²
åˆ›å»º`Dockerfile`ï¼š
```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:8000", "app.main:app"]
```

### æ•°æ®åº“é…ç½®

#### ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“
- å·²ä½¿ç”¨Zeaburæ‰˜ç®¡MySQL
- ç¡®ä¿`DATABASE_URL`åœ¨ç¯å¢ƒå˜é‡ä¸­é…ç½®
- ä¸è¦å°†æ•°æ®åº“å¯†ç æäº¤åˆ°ä»£ç ä»“åº“

#### åˆå§‹åŒ–ç”Ÿäº§æ•°æ®åº“
```bash
python scripts/setup_database.py
```

### CORSé…ç½®ï¼ˆé‡è¦ï¼‰

ä¿®æ”¹`backend/app/main.py`ï¼š
```python
# ç”Ÿäº§ç¯å¢ƒCORSé…ç½®
CORS(app, resources={
    r"/api/*": {
        "origins": ["https://your-frontend-domain.com"],  # åªå…è®¸ä½ çš„å‰ç«¯åŸŸå
        "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"],
        "supports_credentials": False
    }
})
```

---

## é‡è¦æ–‡æ¡£ç´¢å¼•

### æ ¸å¿ƒæ–‡æ¡£ï¼ˆå¿…è¯»ï¼‰

| æ–‡æ¡£å | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| **CLAUDE.md** | `/CLAUDE.md` | Claude CodeæŒ‡å¯¼æ–‡æ¡£ï¼ŒåŒ…å«é¡¹ç›®æ¦‚è¿°ã€æŠ€æœ¯æ ˆã€æ ¸å¿ƒè§„åˆ™ã€APIæ¨¡å¼ç­‰ |
| **PROJECT_HANDOVER.md** | `/PROJECT_HANDOVER.md` | æœ¬æ–‡æ¡£ï¼Œé¡¹ç›®äº¤æ¥æ–‡æ¡£ |
| **å®¢æˆ·åé¦ˆ-éœ€ç¡®è®¤ç»†èŠ‚.md** | `/å®¢æˆ·åé¦ˆ-éœ€ç¡®è®¤ç»†èŠ‚.md` | å®¢æˆ·éœ€æ±‚ç¡®è®¤ï¼ŒåŒ…å«4ä¸ªæ ¸å¿ƒé—®é¢˜åŠç­”æ¡ˆ |

### è®¾è®¡æ–‡æ¡£

| æ–‡æ¡£å | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| **technical_design_document.md** | `/technical_design_document.md` | æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼ˆ800+è¡Œï¼‰ï¼Œè¯¦ç»†çš„ç³»ç»Ÿæ¶æ„å’Œä¸šåŠ¡æµç¨‹ |
| **game_rules.md** | `/game_rules.md` | æ¸¸æˆè§„åˆ™æ–‡æ¡£ï¼Œå®Œæ•´çš„ç©æ³•è¯´æ˜ |
| **user_jiagou.md** | `/user_jiagou.md` | ç”¨æˆ·æä¾›çš„ç³»ç»Ÿæ¶æ„æ–‡æ¡£ï¼ˆä¸­æ–‡ï¼‰ |
| **user_rules.md** | `/user_rules.md` | ç”¨æˆ·æä¾›çš„æ¸¸æˆè§„åˆ™æ–‡æ¡£ï¼ˆä¸­æ–‡ï¼‰ |

### ä»£ç æ–‡æ¡£

| æ–‡æ¡£å | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| **backend/README.md** | `/backend/README.md` | åç«¯è¯´æ˜æ–‡æ¡£ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ |
| **frontend/README.md** | `/frontend/README.md` | å‰ç«¯è¯´æ˜æ–‡æ¡£ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ |

---

## ä¸‹ä¸€æ­¥å·¥ä½œè®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šå®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼ˆé¢„è®¡2-3å¤©ï¼‰

#### Day 1: ç”Ÿäº§å†³ç­–ç³»ç»Ÿ
- [ ] å®ç°ProductionPlan.tsxå‰ç«¯UI
- [ ] ç”Ÿäº§åŠ›åˆ†é…é€»è¾‘
- [ ] å®šä»·è¾“å…¥ä¸éªŒè¯
- [ ] ææ–™è®¡ç®—ä¸æ˜¾ç¤º
- [ ] ææ–™é‡‡è´­åŠŸèƒ½
- [ ] æ‰¹é‡æŠ˜æ‰£è®¡ç®—å±•ç¤º
- [ ] æäº¤ç”Ÿäº§è®¡åˆ’APIè°ƒç”¨

#### Day 2: å›åˆæ¨è¿›ç³»ç»Ÿ
- [ ] å®Œå–„round_service.pyä¸­çš„å›åˆç»“ç®—é€»è¾‘
- [ ] è°ƒç”¨å®¢æµåˆ†é…ç®—æ³•ï¼ˆCustomerFlowAllocatorï¼‰
- [ ] è®¡ç®—é”€å”®ç»“æœ
- [ ] ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨
- [ ] **å®ç°ææ–™åº“å­˜æ¸…é›¶**ï¼ˆé‡è¦ï¼‰
- [ ] æ¨è¿›å›åˆæ•°
- [ ] é‡ç½®ç©å®¶å†³ç­–çŠ¶æ€

#### Day 3: å›åˆæ€»ç»“ä¸æ¸¸æˆç»“æŸ
- [ ] å®ç°RoundSummary.tsxç»„ä»¶
- [ ] æ˜¾ç¤ºå›åˆè¯¦ç»†ç»“æœ
- [ ] å®ç°GameEnd.tsxç»„ä»¶
- [ ] æœ€ç»ˆæ’åå±•ç¤º
- [ ] æ¸¸æˆæµç¨‹å®Œæ•´æµ‹è¯•

### ç¬¬äºŒé˜¶æ®µï¼šä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆé¢„è®¡1-2å¤©ï¼‰

#### Day 4: æµç¨‹ä¼˜åŒ–
- [ ] å†³ç­–æ­¥éª¤æµç¨‹æ§åˆ¶
- [ ] ç­‰å¾…ç•Œé¢å®ç°
- [ ] çŠ¶æ€åŒæ­¥ä¼˜åŒ–
- [ ] é”™è¯¯æç¤ºä¼˜åŒ–

#### Day 5: æµ‹è¯•ä¸ä¿®å¤
- [ ] å®Œæ•´æ¸¸æˆæµç¨‹æµ‹è¯•ï¼ˆ2-4äººï¼‰
- [ ] è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆç ´äº§ã€è´Ÿæ•°ç­‰ï¼‰
- [ ] UIé€‚é…æµ‹è¯•ï¼ˆä¸åŒå±å¹•å°ºå¯¸ï¼‰
- [ ] Bugä¿®å¤

### ç¬¬ä¸‰é˜¶æ®µï¼šéƒ¨ç½²ä¸Šçº¿ï¼ˆé¢„è®¡1å¤©ï¼‰

#### Day 6: éƒ¨ç½²
- [ ] å‰ç«¯æ„å»ºä¸éƒ¨ç½²
- [ ] åç«¯éƒ¨ç½²ä¸é…ç½®
- [ ] æ•°æ®åº“åˆå§‹åŒ–
- [ ] åŸŸåä¸HTTPSé…ç½®
- [ ] çº¿ä¸Šæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## è”ç³»æ–¹å¼ä¸èµ„æº

### æŠ€æœ¯æ”¯æŒ
- **Claude Codeæ–‡æ¡£**: https://docs.claude.com/en/docs/claude-code
- **Reactæ–‡æ¡£**: https://react.dev/
- **Flaskæ–‡æ¡£**: https://flask.palletsprojects.com/
- **Ant Designæ–‡æ¡£**: https://ant.design/

### é¡¹ç›®èµ„æº
- **GitHubä»“åº“**: ï¼ˆå¦‚æœæœ‰ï¼Œè¯·å¡«å†™ï¼‰
- **Zeaburæ§åˆ¶å°**: https://zeabur.com/
- **æ•°æ®åº“è¿æ¥**: è§`backend/app/core/config.py`

### é—®é¢˜åé¦ˆ
- **å·²çŸ¥é—®é¢˜åˆ—è¡¨**: è§æœ¬æ–‡æ¡£"å·²çŸ¥é—®é¢˜"ç« èŠ‚
- **åŠŸèƒ½éœ€æ±‚**: è§æœ¬æ–‡æ¡£"å¾…å¼€å‘åŠŸèƒ½"ç« èŠ‚

---

## é™„å½•

### A. æ•°æ®åº“åˆå§‹åŒ–SQLï¼ˆå‚è€ƒï¼‰

7ç§äº§å“é…æ–¹ç§å­æ•°æ®ï¼š
```python
PRODUCT_RECIPES = [
    {"id": 1, "name": "å¥¶èŒ¶", "difficulty": 1, "base_fan_rate": 0.05, "recipe": {"tea": 1, "milk": 2}},
    {"id": 2, "name": "æ¤°å¥¶", "difficulty": 1, "base_fan_rate": 0.05, "recipe": {"milk": 2, "ingredient": 1}},
    {"id": 3, "name": "æŸ æª¬èŒ¶", "difficulty": 1, "base_fan_rate": 0.05, "recipe": {"tea": 1, "fruit": 1}},
    {"id": 4, "name": "æœæ±", "difficulty": 1, "base_fan_rate": 0.05, "recipe": {"fruit": 3}},
    {"id": 5, "name": "çç å¥¶èŒ¶", "difficulty": 2, "base_fan_rate": 0.20, "recipe": {"tea": 1, "milk": 2, "ingredient": 1}},
    {"id": 6, "name": "æ°´æœå¥¶æ˜”", "difficulty": 2, "base_fan_rate": 0.20, "recipe": {"milk": 2, "fruit": 2}},
    {"id": 7, "name": "æ°´æœèŒ¶", "difficulty": 3, "base_fan_rate": 0.30, "recipe": {"tea": 1, "fruit": 2, "ingredient": 1}}
]
```

### B. ç¯å¢ƒå˜é‡æ¨¡æ¿

`.env.example`:
```
# æ•°æ®åº“é…ç½®
DATABASE_URL=mysql+pymysql://user:password@host:port/database

# Flaské…ç½®
SECRET_KEY=your-secret-key-here
DEBUG=True

# CORSé…ç½®
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
```

### C. Gitå¿½ç•¥é…ç½®

`.gitignore`:
```
# Python
__pycache__/
*.py[cod]
venv/
.env

# Node
node_modules/
dist/
.vite/

# IDE
.vscode/
.idea/

# Database
*.db
*.sqlite
```

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒï¼š
1. `CLAUDE.md` - é¡¹ç›®æ¦‚è¿°ä¸æ ¸å¿ƒè§„åˆ™
2. `technical_design_document.md` - è¯¦ç»†æŠ€æœ¯è®¾è®¡
3. æœ¬æ–‡æ¡£ - å¼€å‘è¿›åº¦ä¸äº¤æ¥ä¿¡æ¯
