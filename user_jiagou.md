1.  整体架构

1.  生产端
    1.  开店决策

其中，租金为玩家线下抽卡形成，装修为简装：花费400元，可容纳2位奶茶师。精装：花费800元，可容纳3位奶茶师。豪华装：花费1600元，可容纳4位奶茶师。

- 1.  人力决策

判断装修等级，若为简装则显示2个待招募栏位，精装为3位，豪华装为4位。若达到最大容纳量，则本回合不能进行招募操作。

若本回合执行招募行动，玩家线下抽卡，完成后在待招募栏位中填写抽到奶茶师姓名、工资、生产力，并将工资同步到财务端，生产力同步到生产端。

- 1.  市场决策

判断玩家是否执行市场调研行动，如果是，则扣除调研费用500元到财务端，并从计算端显示调用下回合客流。

判断玩家是否执行广告行动，如果是则扣除广告费用800到财务端，并输入线下掷骰子的广告分同步到计算端。

- 1.  研发决策

判断玩家是否进行研发行动，如果是，则扣除研发费用600元。若研发成功，则玩家选择研发成功的配方到同步到生产端，解锁为可生产状态。若失败，则不解锁，但同样扣除研发费用。

- 1.  生产决策

显示七种待研发配方的研发难度、圈粉率、配方，初始为灰色待解锁状态，若研发成功某种配方，则点亮为解锁状态，显示分配生产力与更改定价按钮。

奶茶：1奶1茶 难度1 圈粉率5%

椰奶：1奶1果 难度1 圈粉率5%

柠檬茶1茶1果 难度1 圈粉率5%

果汁：2果 难度1 圈粉率5%

珍珠奶茶:2奶1茶1配料 难度2 圈粉率20%

水果奶昔1奶1果3配料 难度2 圈粉率20%

水果茶：3果1茶1配料 难度3 圈粉率30%

累加招募奶茶师所有生产力，显示为本回合可分配生产力。玩家可将总生产力分配到各可生产配方下，并根据配方自动计算生产成本，同步到财务端。各配方成本如下

茶叶6元

牛奶4元

水果5元

配料2元

若当回合每种原料购入量超过50份，则自动享受价格-10%，可累加，最低可降至原价的50%。

玩家可每3回合更改每种配方的定价。

将价格、生产力与圈粉率数据同步到计算端。

1.  计算端
    1.  收集各店铺各配方的定价、配方圈粉率、广告分。
    2.  口碑分计算

口碑分由广告、圈粉率、总销售杯数共同决定，计算公式为：

口碑分=广告分+圈粉率\***总销售杯数（需累加之前的销售杯数）**

- 1.  市场机制

地块上分布着两类客户，分别是低消费客户与高消费客户，每回合两类客户的数量会根据脚本产生浮动。主持人每回合将根据该区域总客流、各店经营情况及不同客户的购买逻辑向各店发出订单，两类客户购买逻辑为：

高消费客户：优先购买该区域内上回合口碑分最高的产品。若该产品**生产力**不能满足该区域所有客户的需求，则顺次购买口碑分第二、第三的产品，以此类推。若两产品口碑分相同，则比较定价。若定价与口碑分均相同，则平分客户。

低消费客户：优先购买该区域内价格最低且**上回合口碑分**大于零的产品。若该产品**生产力**不能满足该区域所有客户的需求，则顺次购买价格第二、第三低的客户。若两产品定价相同，则比较口碑分。若定价与口碑分均相同，则平分客户。各店生产力将被优先满足高消费客户。

示例：如某地块有20位高购买力客户，60位低购买力客户。该地块各店共提供五种饮品，如下所示：

|     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- |
|     | A   | B   | C   | D   | E   |
| 口碑分 | 40  | 35  | 30  | 30  | 25  |
| 定价  | 30  | 25  | 20  | 15  | 15  |
| 生产力 | 10  | 5   | 15  | 20  | 10  |

高购买力客户会购买：10杯A,5杯B，5杯D（CD口碑分相同，客户优先购买定价更低的D）

低购买力客户会购买：15杯D（DE定价相同，客户优先购买口碑分更高的D,但D有5杯生产力被高购买力客户消耗，则只有15杯生产力被满足低购买力客户）,10杯E,15杯C，另有20位客户不会购买。

根据以上机制，为每位玩家的每种配方分配客流

- 1.  客流脚本

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 回合  | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  |
| 低   | 300 | 280 | 330 | 200 | 280 | 250 | 330 | 430 | 260 | 610 |
| 高   | 40  | 90  | 110 | 60  | 70  | 120 | 160 | 40  | 80  | 190 |

1.  财务端

基于生产端和计算端数据自动生成一张本回合财务报表。表格内容见附件Excel